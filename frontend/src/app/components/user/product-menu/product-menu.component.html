<div class="menu-wrapper" [class.closed]="!isOpen">
  <div class="menu-card">
    <h2 class="menu-title">Menú de productos</h2>

    <div *ngIf="errorMsg" class="menu-error">{{ errorMsg }}</div>

    <ng-container *ngIf="!errorMsg">
      <div class="cards-grid">
        <div
          class="card-item"
          *ngFor="let f of flavors"
          (click)="onSelectFlavor(f)"
          tabindex="0"
          [attr.aria-disabled]="!isOpen"
        >
          <div class="card-image" [style.backgroundImage]="'url(' + (f.imagen_url || 'assets/placeholder.png') + ')'"></div>
          <div class="card-body">
            <div class="card-name">{{ f.nombre }}</div>
            <div class="card-price">{{ f.precio | number:'1.2-2' }} €</div>
            <a class="info-link" (click)="$event.stopPropagation()">Más información</a>
          </div>
        </div>
      </div>

      <div class="bottom-buttons">
        <button class="btn-secondary" (click)="goToHistory()">Historial</button>
        <button class="btn-secondary" (click)="goToPoints()">Mis Puntos</button>
        <button class="btn-secondary" (click)="logout()">Cerrar Sesión</button>
      </div>
    </ng-container>
  </div>
</div>

<app-store-closed-overlay *ngIf="!isOpen"></app-store-closed-overlay>
