<div class="history-wrapper">
  <h1>Historial de pedidos</h1>

  <div *ngIf="loading" class="loading">Cargando...</div>
  <div *ngIf="!loading && errorMsg" class="error">{{ errorMsg }}</div>

  <table *ngIf="!loading && !errorMsg && history?.length" class="table">
    <thead>
      <tr>
        <th>Código</th>
        <th>Fecha</th>
        <th>Hora recogida</th>
        <th>Resumen</th>
        <th>Total (€)</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let o of history">
        <td>{{ codeOf(o) }}</td>
        <td>{{ o.fecha_hora || '—' }}</td>
        <td>{{ o.hora_recogida || '—' }}</td>
        <td>{{ o.producto || '—' }}</td>
        <td>{{ (o.total ?? 0) | number:'1.2-2' }}</td>
        <td>{{ o.estado || '—' }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && !errorMsg && !history?.length" class="empty">
    No tienes pedidos todavía.
  </div>
</div>
