<!-- frontend/src/app/components/user/payment-confirmation/payment-confirmation.component.html -->

<div class="payment-confirmation-container">
  <h1>Confirmación y Pago</h1>

  <!-- Mensaje de error general -->
  <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>

  <!-- Resumen de pedido -->
  <div class="order-summary">
    <h2>Tu Pedido</h2>
    <p>
      <strong>Sabor:</strong> {{ flavor.nombre }}
      – €{{ flavor.precio.toFixed(2) }}
    </p>

    <p *ngIf="toppings.length > 0">
      <strong>Toppings:</strong>
      {{ toppingNames }}
      (€{{ toppingsPrice.toFixed(2) }})
    </p>

    <p>
      <strong>Tamaño:</strong> {{ size.nombre }}
      – €{{ size.precio.toFixed(2) }}
    </p>
  </div>

  <!-- Hora de recogida -->
  <div class="pickup-time">
    <p><strong>Hora de Recogida:</strong> {{ pickupTime }}</p>
  </div>

  <hr />

  <!-- Totales y canje de puntos -->
  <div class="totals">
    <p><strong>Subtotal:</strong> €{{ subtotal.toFixed(2) }}</p>

    <div class="points-row">
      <label for="puntos">
        Puntos a canjear (disponibles: {{ puntosUsuario }}):
      </label>
      <input
        type="number"
        id="puntos"
        class="form-control"
        [max]="puntosUsuario"
        [min]="0"
        [value]="puntosAUsar"
        (input)="onPointsChange($event)"
      />
    </div>

    <p><strong>Descuento:</strong> €{{ descuento.toFixed(2) }}</p>
    <p><strong>Total a pagar:</strong> €{{ total.toFixed(2) }}</p>
  </div>

  <!-- Botón final de pago -->
  <button class="btn-primary" (click)="confirmPayment()">
    Confirmar y pagar
  </button>
</div>
